/**
 * skylark-widgets-base - The skylark widget base library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(t,i,e){"function"==typeof e?(map[t]={factory:e,deps:i.map(function(i){return function(t,i){if("."!==t[0])return t;var e=i.split("/"),s=t.split("/");e.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?e.pop():e.push(s[n]));return e.join("/")}(i,t)}),resolved:!1,exports:null},require(t)):map[t]={factory:null,resolved:!0,exports:e}},require=globals.require=function(t){if(!map.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=map[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(globals,i)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-widgets-base/base",["skylark-langx/skylark"],function(t){return t.attach("widgets.base",{})}),define("skylark-widgets-base/ActionManager",["skylark-langx/Evented","./base"],function(t,i){var e=t.inherit({klassName:"Manager",addAction:function(t,i,e,s){},executeAction:function(){},removeAction:function(t,i){}});return i.ActionManager=e}),define("skylark-widgets-base/Action",["skylark-langx/objects","skylark-langx/Evented","skylark-data-collection/HashMap","./base","./ActionManager"],function(t,i,e,s,n){var r=i.inherit({klassName:"Action",name:"",category:"",text:"",tooltip:"",icon:"",shortcut:"",state:{get:function(){return this._state||(this._state=new e({checked:!1,disabled:!1}))}},_construct:function(i){i&&t.mixin(this,i)},_init:function(){},execute:function(t){this._execute&&this._execute(t),this.trigger("executed",{params:t})}});return s.Action=r}),define("skylark-langx-numbers/Vector2",["./numbers"],function(t){function i(t,i){this.x=t||0,this.y=i||0}return Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{set:function(t,i){return this.x=t,this.y=i,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},sub:function(t,i){return void 0!==i?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var i=this.x,e=this.y,s=t.elements;return this.x=s[0]*i+s[3]*e+s[6],this.y=s[1]*i+s[4]*e+s[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this},clampLength:function(t,i){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(i,e)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,e=this.y-t.y;return i*i+e*e},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,e){return this.subVectors(i,t).multiplyScalar(e).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},rotateAround:function(t,i){var e=Math.cos(i),s=Math.sin(i),n=this.x-t.x,r=this.y-t.y;return this.x=n*e-r*s+t.x,this.y=n*s+r*e+t.y,this}}),t.Vector2=i}),define("skylark-widgets-base/SkinManager",[],function(){"use strict";var t=[],i=[];return{register:function(e,s){t.push(s),i[s]=e},get:function(e){e||(e=t[0]);return new i[e]},getList:function(){return t.slice()}}}),define("skylark-widgets-base/Widget",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-events","skylark-langx-numbers/Vector2","skylark-domx-browser","skylark-domx-data","skylark-domx-eventer","skylark-domx-noder","skylark-domx-files","skylark-domx-geom","skylark-domx-velm","skylark-domx-query","skylark-domx-fx","skylark-domx-plugins","skylark-data-collection/HashMap","./base","./SkinManager"],function(skylark,types,objects,events,Vector2,browser,datax,eventer,noder,files,geom,elmx,$,fx,plugins,HashMap,base,SkinManager){var Widget=plugins.Plugin.inherit({klassName:"Widget",_construct:function(t,i,e){!t||t instanceof Widget||(e=i,i=t,t=null),types.isHtmlNode(i)?e=this._parse(i,e):(e=i,i=null),types.isString(e)&&(e={tagName:e}),this.overrided(i,e),i?this._velm=this.elmx(this._elm):(this._velm=this._create(),this._elm=this._velm.elm()),Object.defineProperty(this,"state",{value:this.options.state||new HashMap}),this.visible=!0,this.size=new Vector2(0,0),this.position=new Vector2(0,0),this._mode=Widget.TOP_LEFT,this._init();var s=this.options.addons;if(s){var n=this.constructor,r=n.addons;for(var o in s)for(var a=0;a<s[o].length;a++){var h=s[o][a];if(types.isString(h)){var u=h,l=r[o][u],c=l.ctor?l.ctor:l;this.addon(c,l.options)}}}t&&this.parent(t)},_parse:function(elm,options){var optionsAttr=datax.data(elm,"options");if(optionsAttr){var options1=eval("({"+optionsAttr+"})");options=objects.mixin(options1,options)}return options||{}},_create:function(){var t=this.options.template;if(t)return this.elmx(t);var i=this.options.tagName;if(i)return this.elmx(noder.createElement(i,{style:{position:"absolute",overflow:"hidden"}}));throw new Error("The template or tagName is not existed in options!")},_init:function(){var t=this;this.widgetClass&&this._velm.addClass(this.widgetClass),this.state.on("changed",function(i,e){t._refresh(e.data)})},_startup:function(){},_updatePosition:function(t){void 0!==t&&(this._mode=t),this._mode===Widget.TOP_LEFT||this._mode===Widget.TOP_RIGHT?this._elm.style.top=this.position.y+"px":this._elm.style.bottom=this.position.y+"px",this._mode===Widget.TOP_LEFT||this._mode===Widget.BOTTOM_LEFT?this._elm.style.left=this.position.x+"px":this._elm.style.right=this.position.x+"px"},_updateSize:function(){this._elm.style.width=this.size.x+"px",this._elm.style.height=this.size.y+"px"},_updateVisibility:function(){this._elm.style.display=this.visible?"block":"none"},_refresh:function(t){},mapping:{events:{},attributs:{},properties:{},styles:{}},addon:function(t,i){var e=t.categoryName,s=t.addonName;this._addons=this.addons||{};var n=this._addons[e]=this._addons[e]||{};return n[s]=new t(this,i),this},addons:function(t,i){this._addons=this.addons||{};var e=this._addons[t]=this._addons[t]||{};if(void 0==i)return objects.clone(e||null);objects.mixin(e,i)},render:function(){return this._elm},getEnclosing:function(t){return null},getEnclosed:function(){return children=new ArrayList,children},getSkin:function(){return SkinManager.get()},show:function(){this._velm.show()},hide:function(){this._velm.hide()},focus:function(){try{this._velm.focus()}catch(t){}return this},blur:function(){return this._velm.blur(),this},enable:function(){return this.state.set("disabled",!1),this},disable:function(){return this.state.set("disabled",!0),this},addClass:function(t){return this._velm.addClass(t),this},removeClass:function(t){return this._velm.removeClass(t),this},aria:function(t,i){const e=this,s=e.getEl(e.ariaTarget);return void 0===i?e._aria[t]:(e._aria[t]=i,e.state.get("rendered")&&s.setAttribute("role"===t?t:"aria-"+t,i),e)},attr:function(t,i){var e=this._velm,s=e.attr(t,i);return s==e?this:s},center:function(){this.position.set((this.parent.size.x-this.size.x)/2,(this.parent.size.y-this.size.y)/2)},css:function(t,i){var e=this._velm,s=e.css(t,i);return s==e?this:s},data:function(t,i){var e=this._velm,s=e.data(t,i);return s==e?this:s},parent:function(t){if(!t)return this._parent;this._parent=t,this.attach(t._elm)},prop:function(t,i){var e=this._velm,s=e.prop(t,i);return s==e?this:s},throb:function(t){return fx.throb(this._elm,t)},emit:function(t,i){var e=events.createEvent(t,{data:i});return events.Emitter.prototype.emit.call(this,e,i)},update:function(){this._updateVisibility(),this.visible&&(this._updateSize(),this._updatePosition())},attach:function(t,i){var e=t;i&&"child"!=i?"before"==i?noder.before(e,this._elm):"after"==i&&noder.after(e,this._elm):noder.append(e,this._elm),this._startup()},detach:function(){this._velm.remove()}});return Widget.TOP_LEFT=0,Widget.TOP_RIGHT=1,Widget.BOTTOM_LEFT=2,Widget.BOTTOM_RIGHT=3,Widget.inherit=function(t){var i=plugins.Plugin.inherit.apply(this,arguments);function e(t){i.prototype[t]=function(i){return void 0!==i?(this.state.set(t,i),this):this.state.get(t)}}if(t.state)for(var s in t.state)e(s);return t.pluginName&&plugins.register(i,t.pluginName),i},Widget.register=function(t,i){var e=t.prototype,s=i||e.pluginName;function n(i){t.prototype[i]=function(t){return void 0!==t?(this.state.set(i,t),this):this.state.get(i)}}if(e.state)for(var r in e.state)n(r);return s&&plugins.register(t,s),t},base.Widget=Widget}),define("skylark-widgets-base/SkinDark",["./SkinManager"],function(t){"use strict";function i(){this.font="Arial",this.barColor="#222222",this.sepColor="#292929",this.panelColor="#333333",this.resizeTabColor="#222222",this.boxColor="#444444",this.textColor="#FFFFFF",this.iconColor="#FFFFFF",this.buttonColor="#222222",this.buttonOverColor="#555555",this.buttonLightColor="#333333",this.audioTrack="#222222",this.audioScrubber="#FFFFFF",this.audioProgress="#555555",document.body.style.fontFamily=this.font,document.body.style.color=this.textColor,document.body.style.fontSize="12px"}return t.register(i,"dark"),i}),define("skylark-widgets-base/main",["./base","./Action","./ActionManager","./Widget","./SkinManager","./SkinDark"],function(t){return t}),define("skylark-widgets-base",["skylark-widgets-base/main"],function(t){return t})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-base.js.map
