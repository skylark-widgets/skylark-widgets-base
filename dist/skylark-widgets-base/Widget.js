/**
 * skylark-widgets-base - The skylark widget base library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-events","skylark-domx-browser","skylark-domx-data","skylark-domx-eventer","skylark-domx-noder","skylark-domx-files","skylark-domx-geom","skylark-domx-velm","skylark-domx-query","skylark-domx-fx","skylark-domx-plugins","skylark-data-collection/HashMap","./base"],function(skylark,types,objects,events,browser,datax,eventer,noder,files,geom,elmx,$,fx,plugins,HashMap,base){var Widget=plugins.Plugin.inherit({klassName:"Widget",_elmx:elmx,_construct:function(t,e){types.isHtmlNode(t)?e=this._parse(t,e):(e=t,t=null),this.overrided(t,e),t?this._velm=elmx(this._elm):(this._velm=this._create(),this._elm=this._velm.elm()),Object.defineProperty(this,"state",{value:this.options.state||new HashMap}),this._init();var s=this.options.addons;if(s){var i=this.constructor.addons;for(var n in s)for(var r=0;r<s[n].length;r++){var a=s[n][r];if(types.isString(a)){var o=a,l=i[n][o],h=l.ctor?l.ctor:l;this.addon(h,l.options)}}}this._elm.parentElement&&this._startup()},_parse:function(elm,options){var optionsAttr=datax.data(elm,"options");if(optionsAttr){var options1=eval("({"+optionsAttr+"})");options=objects.mixin(options1,options)}return options||{}},_create:function(){var t=this.options.template;if(t)return this._elmx(t);throw new Error("The template is not existed in options!")},_init:function(){var t=this;this.widgetClass&&this._velm.addClass(this.widgetClass),this.state.on("changed",function(e,s){t._refresh(s.data)})},_startup:function(){},_refresh:function(t){},mapping:{events:{},attributs:{},properties:{},styles:{}},addon:function(t,e){var s=t.categoryName,i=t.addonName;return this._addons=this.addons||{},(this._addons[s]=this._addons[s]||{})[i]=new t(this,e),this},addons:function(t,e){this._addons=this.addons||{};var s=this._addons[t]=this._addons[t]||{};if(void 0==e)return objects.clone(s||null);objects.mixin(s,e)},render:function(){return this._elm},getEnclosing:function(t){return null},getEnclosed:function(){return children=new ArrayList,children},show:function(){this._velm.show()},hide:function(){this._velm.hide()},focus:function(){try{this._velm.focus()}catch(t){}return this},blur:function(){return this._velm.blur(),this},enable:function(){return this.state.set("disabled",!1),this},disable:function(){return this.state.set("disabled",!0),this},aria:function(t,e){const s=this,i=s.getEl(s.ariaTarget);return void 0===e?s._aria[t]:(s._aria[t]=e,s.state.get("rendered")&&i.setAttribute("role"===t?t:"aria-"+t,e),s)},attr:function(t,e){var s=this._velm,i=s.attr(t,e);return i==s?this:i},css:function(t,e){var s=this._velm,i=s.css(t,e);return i==s?this:i},data:function(t,e){var s=this._velm,i=s.data(t,e);return i==s?this:i},prop:function(t,e){var s=this._velm,i=s.prop(t,e);return i==s?this:i},throb:function(t){return fx.throb(this._elm,t)},emit:function(t,e){var s=events.createEvent(t,{data:e});return events.Emitter.prototype.emit.call(this,s,e)},attach:function(t,e){var s=t;e&&"child"!=e?"before"==e?noder.before(s,this._elm):"after"==e&&noder.after(s,this._elm):noder.append(s,this._elm),this._startup()},detach:function(){this._velm.remove()}});return Widget.inherit=function(t){var e=plugins.Plugin.inherit.apply(this,arguments);function s(t){e.prototype[t]=function(e){return void 0!==e?(this.state.set(t,e),this):this.state.get(t)}}if(t.state)for(var i in t.state)s(i);return t.pluginName&&plugins.register(e,t.pluginName),e},Widget.register=function(t,e){var s=t.prototype,i=e||s.pluginName;function n(e){t.prototype[e]=function(t){return void 0!==t?(this.state.set(e,t),this):this.state.get(e)}}if(s.state)for(var r in s.state)n(r);return i&&plugins.register(t,i),t},base.Widget=Widget});
//# sourceMappingURL=sourcemaps/Widget.js.map
